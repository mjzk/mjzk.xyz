<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><style>@font-face {font-family:'Rubik';font-style:normal;font-weight:400;src:url(/fonts/rubik.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*{font-family:Rubik}</style><script defer src=https://unpkg.com/@visactor/vtable/dist/vtable.min.js></script><link href=/css/line-awesome.min.css rel=stylesheet><link href=/asciinema-player.css rel=stylesheet><link as=font crossorigin href=https://mjzk.xyz/fonts/vendor/jost/jost-v4-latin-regular.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://mjzk.xyz/fonts/vendor/jost/jost-v4-latin-700.woff2 rel=preload type=font/woff2><link href=https://mjzk.xyz/main.css rel=stylesheet><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Yet Another Zero Knowledge Benchmark Report | MJZK</title><meta content="version 2024.05.09" name=description><link href=https://mjzk.xyz/yazkb/ rel=canonical><meta content="Yet Another Zero Knowledge Benchmark Report" property=og:title><meta content="version 2024.05.09" property=og:description><meta content=website property=og:type><meta content=https://mjzk.xyz/yazkb/ property=og:url><meta content=tb-logo.png property=og:image><meta content=2021-05-01T08:08:08+08:00 property=og:updated_time><meta content="Yet Another Zero Knowledge Benchmark Report" property=og:site_name><meta content=en_US property=og:locale><script type=application/ld+json>
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://mjzk.xyz/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Yazkb",
            "item": "https://mjzk.xyz/yazkb/"
          },
        
      
    
  }
</script><meta content=#000 name=theme-color><link href=/joinbase_logo_180.png rel=apple-touch-icon sizes=180x180><link href=/joinbase_logo_32.png rel=icon sizes=32x32 type=image/png><link href=/joinbase_logo_16.png rel=icon sizes=16x16 type=image/png><body class="page single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" id=menu-btn type=checkbox><label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=https://mjzk.xyz>MJZK</a><button aria-label="Toggle mode" class="btn btn-link order-2 order-md-4" id=mode type=button><span class=toggle-dark><svg class="feather feather-moon" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span> <span class=toggle-light><svg class="feather feather-sun" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=5></circle><line x1=12 x2=12 y1=1 y2=3></line><line x1=12 x2=12 y1=21 y2=23></line><line x1=4.22 x2=5.64 y1=4.22 y2=5.64></line><line x1=18.36 x2=19.78 y1=18.36 y2=19.78></line><line x1=1 x2=3 y1=12 y2=12></line><line x1=21 x2=23 y1=12 y2=12></line><line x1=4.22 x2=5.64 y1=19.78 y2=18.36></line><line x1=18.36 x2=19.78 y1=5.64 y2=4.22></line></svg></span></button><ul class="navbar-nav fork-me order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/mjzk><svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a><li class=nav-item><a class=nav-link href=https://twitter.com/mjzkxyz><svg class="feather feather-twitter" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg><span class="ms-2 visually-hidden">Twitter</span></a></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=https://mjzk.xyz/blog/>Blog</a><li class=nav-item><a class=nav-link href=https://mjzk.xyz/yazkb/>Yet Another ZK Benchmark</a></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input aria-label="Search docs..." class="form-control is-search" placeholder="Search docs..." autocomplete=off id=userinput type=search><div class="shadow bg-white rounded" id=suggestions></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row justify-content-center"><div class="col-md-12 col-lg-12 col-xl-12"><article><div class=page-header><h1>Yet Another Zero Knowledge Benchmark Report</h1><h1>version 2024.05.09</h1></div><div style=text-align:center><img alt=yazkb src=/imgs/yazkb/yazkb.webp title=yazkb></div><h2 id=changelog>Changelog</h2><ul><li>2024.05.09: more thoughts in conclusion.<li>2024.05.08: The sha2 task has been added and benched.<li>2024.05.07: first version released.</ul><h2 id=introduction>Introduction</h2><p>The YAZKB (Yet Another Zero Knowledge Benchmark) project aims to offer an end-to-end, cutting-edge, production-focused and interdisciplinary perspective for ZK (Zero Knowledge) performance and engineering.<h2 id=highlight>Highlight</h2><ol><li><p>Timestamp versioning</p> <p>We maintain a timely and rhythmic update. You just got how far the benchmark is from the bleeding edge by above timestamp based version number.</p><li><p>Comprehensive</p> <p>We don't cherry-pick benches and control group that are good for a particular product. The full range of zk systems, including kinds of ZK libraries, frameworks, and virtual machines, will be evaluated in the benchmark, in the sense of end-to-end.</p><li><p>Frontier</p> <p>The author has a long experience in the forefront of technologies, such as DB, AI and languages. It is hoped that the ZK systems could be chosen to represent different tech forefronts. And, the chosen ZK systems could be reviewed at the tech frontier as well.</p><li><p>Insight</p> <p>We have in-depth analysis and beautiful tables. You are not looking at an eye-catching title party, the author hopes to provide continuous efforts for the development of the ZK community.</p> <p>The suggestion has been proposed in this report based on the benchmark results.</p></ol><h2 id=zks>ZKs</h2><div id=objects_table style=width:100%;height:300px></div><script defer src=objects.js></script><br><p align=center>Tab.1 Benchmark objects<p>This benchmark is the first project to compare halo2, risc0 and sp1. These ZK systems are very different from the technical perspective, but from the point of end usage, they are comparable.<p>The usage of halo2 and its background tech SNARK was very popular yesterday in ZK and blockchain. However, obviously, the official github project is no longer actively developed, so we will call it "maintenance" status for now. There are a lot of issues with no working or feedback, which is terrible. From the engineering perspective, this project is not recommended.<p>** for halo2, I actually use tweaked library like <a href=https://github.com/halo2-ce/halo2>halo2-ce</a> or <a href=https://github.com/axiom-crypto/halo2-lib>halo2-lib</a>, although they are in "maintenance" as well.<p>In contrast, the two zkvm projects are evolving rapidly and can already handle a large number of scenarios, but whether they have reached production level requires careful evaluation and auditing. On the other hand, rapid iteration brings instability in usage, and experienced engineers are needed to maintain the application well.<h2 id=tasks>Tasks</h2><div id=task_table style=width:100%;height:200px></div><script defer src=tasks.js></script><br><p align=center>Tab.2 Benchmark task list<p>A series of end-to-end tasks from simple to complex have been proposed to comprehensively evaluate the main aspects of the subjects. This tasks set allows for a detailed evaluation of different layers in a ZK system, ensuring that the benchmark captures real-world production performance, rather than unpractical micro-benchmarks.<p>Currently, the task fibonacci and sha2 have been benched. More bench tasks are in consideration and coming soon.<h2 id=hardware>Hardware</h2><div id=hardware_table style=width:100%;height:200px></div><script defer src=hardware.js></script><br><p align=center>Tab.3 Hardware environment<p>In the first release, the above modern medium x86 box is used to align with most client environments. But it is expected to expand to high-end, low-end, or even heterogeneous hardwares soon.<h2 id=measurement>Measurement</h2><p>All benchmark tasks have 2 passes:<ol><li>first pass: warmup running<li>second pass: bench running</ol><p>In the second pass, we only run one shot of bench running rather than a hot loop. But we run at least 5 times for all tasks to use the best results as the final results.<p>It is hoped that the measurement can be closer to real-world production. Because:<ol><li>in the production, one specified proving and verifying are not re-run in a hot loop. This makes no sense.<li>local SSD IO is measured and included in the results. In the production, IO is one part of end-to-end case in that the proof is expected to be sent to many 3rd verifiers. Generally speaking, IO is not the bottleneck. And our local IO is much faster than common network IO.</ol><h2 id=results>Results</h2><div id=benchmark_results style=width:100%;height:600px></div><script defer src=results.js></script><br><p align=center>Tab.4 Benchmark results - run time<h4 id=task-fibonacci>Task - fibonacci</h4><p>Here, the parameter of fibonacci task here is the upper bound of loop counter. In other words, the larger the parameter, the larger the circuit scale.<p>From the run time table of the fibonacci task, it is great to get:<ol><li><p>The halo2/halo2-lib has obvious performance advantages in all parameters or circuit scales and in both proving and verifying. The disadvantage of halo2 is that the threshold for developing circuits is relatively high.</p><li><p>The proving speedup of halo2 to that of two zkvm is very high, like 10x to 200x, in small circuit scales (parameter <= 1000), but only several times , like 6x, in big circuit scales (parameter >= 10000).</p> <p>When the circuit scale becomes large enough, the performance gap between zkvm and halo2 is narrowing.</p> <p>It can be reasonably assumed that if STARK continues to make algorithmic and hardware optimizations, such as the recent Circle STARK algorithm and the upcoming GPU benchmark, STARK may soon be able to compete with Halo2 on large-scale circuits.</p><li><p>The verifying speedup of halo2 to that of two zkvms are high but limited. Halo 2's constant verifying time is impressive, although the verifying times of two zkvms are also fast in absolute time, especially, for risc0.</p> <p>When the circuit scale is not too large, a stable saturation phenomenon has been shown. This should be attributed to the computational background overhead of the VM. These overheads are likely to decrease as the two projects continue to develop. Let's wait and see.</p><li><p>As ZKVM, there is a certain degree of competition between RISC0 and SP1. And the current benched version of risc0 is not latest enough like that of sp1. I am happy to continue updating and following the evolution of both.</p></ol><h4 id=task-sha2>Task - sha2</h4><p>Here, the parameter of sha2 task here is the byte length of input strings/bytes. The larger the parameter may still mean the larger the circuit scale.<ol><li><p>For proving time, sp1 wins in this task. halo2 is 2x slower, and risc0 is 20x slower in the worst case. For verifying time, risc0 still wins, but not too much in large parameter case.</p><li><p>In halo2 side, I can not find a suitable implementation in halo2-lib, so I tweak the source from halo2-ce to allow dynamic input length.</p> <p>On the surface, halo2 is only 2 times slower than sp1, but in fact, halo2's <code>ParamsIPA::new</code> is 2 orders of magnitude slower than its proving and verifying, but this call is not included in the performance results, which is a bit ridiculous. In short, if both pk and vk are generated dynamically, halo2 (or say halo2-ce) is the slowest and basically doesn't work on strings which length is around 100kB or more. (I will continue to pay attention to this issue.)</p><li><p>sp1 has best proving run time, smooth transition curve and great balance between proving and verifying. When the length of input strings becomes long, the proving time of risc0 is orders of magnitude slower.</p></ol><h2 id=conclusion>Conclusion</h2><p>As a user of ZK technology,<ol><li><p>If you pursue the performance in some simple task, you can still consider halo2. However, given the "maintenance" state of halo2, it is questionable whether this simple performance advantage can be sustained in the future.</p><li><p>However, if you accept the balance between development and performance, ZKVM way can already enter your trial zone. I suggest you pay attention to and try the new zkvm paradigm, which is very likely to replace the existing SNARK-based ecosystem in the future.</p><li><p>Currently, sp1 is the most balanced ZKVM. However, this does not mean risc0 has no chance. In fact, the toolchain of sp1 is simply modified from that of risc0. The main work of sp1 is its different ZK backend. risc0 is the originator of RISC VM based ZK proving system(at least for production-level implementation). It has stronger control over the whole stack. sp1 outsources major components to different open source dependencies. This is smart, but also limits its ceiling, in that if the main works are outside, its competitors can easily get them, too.</p><li><p>Current ZKVMs has big improvement space in performance. The API needs to be further stabilized, the VM execution efficiency is still low, and the GPU support is still relatively rudimentary. But I believe that this year of ZKVM will be very different.</p></ol><h2 id=one-more-thing>One more thing</h2><p>More complex end-to-end benchmark tasks and GPU benchmark results are coming soon. Stay tuned!<p>Thank you for following <a href=https://github.com/mjzk/yazkb>YAZKB</a> and my blog, it is hoped to bring you more and latest ZK and blockchain practices.</article></div></div></div></div><footer class="site-footer text-muted"><div class=container><div class="d-flex justify-content-between"><div><p class=copyright-text>Copyright © 2024 - 2024 <a href=#>MJZK</a></div></div></div><script src="https://www.googletagmanager.com/gtag/js?id=G-ZGZF8S1VKY" async></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-ZGZF8S1VKY')</script></footer><script defer src=https://mjzk.xyz/js/main.js></script><script defer src=https://mjzk.xyz/plugins/elasticlunr.min.js></script><script defer src=https://mjzk.xyz/search_index.en.js></script><script defer src=https://mjzk.xyz/js/search.js></script>